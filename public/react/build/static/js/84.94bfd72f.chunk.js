(this.webpackJsonp=this.webpackJsonp||[]).push([[84],{"0fBl":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(n("2/Rp"));n("L/Qf");var r=i(n("q1tI")),l=n("spEH"),o=i(n("/k9T"));function i(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.visible,n=e.onCancel,i=e.onSuccess,c=e.title,s=e.subTitle,u=e.content;return r.default.createElement(o.default,{title:c,btn:r.default.createElement("div",null,r.default.createElement(a.default,{size:"large",onClick:n},"取消"),r.default.createElement(a.default,{type:"danger",size:"large",onClick:i},"确认删除")),onCancel:n,visible:t},r.default.createElement("div",{className:"desc"},r.default.createElement(l.AlignCenter,{className:"descMain"},r.default.createElement("i",{className:"iconfont icon-shanchu_tc_icon mr10"}),u),r.default.createElement("p",null,s)))}},NJEC:function(e,t,n){"use strict";n.r(t);var a=n("q1tI"),r=n("VCL8"),l=n("3S7+"),o=n("CtXQ"),i=n("2/Rp"),c=n("YMnH"),s=n("ZvpZ"),u=n("H84U");function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function d(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=y(e);if(t){var r=y(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return v(this,n)}}function v(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var A=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(f,e);var t,n,r,o=g(f);function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(t=o.call(this,e)).onConfirm=function(e){t.setVisible(!1,e);var n=t.props.onConfirm;n&&n.call(b(t),e)},t.onCancel=function(e){t.setVisible(!1,e);var n=t.props.onCancel;n&&n.call(b(t),e)},t.onVisibleChange=function(e){t.props.disabled||t.setVisible(e)},t.saveTooltip=function(e){t.tooltip=e},t.renderOverlay=function(e,n){var r=t.props,l=r.okButtonProps,o=r.cancelButtonProps,c=r.title,s=r.cancelText,u=r.okText,f=r.okType,d=r.icon;return a.createElement("div",null,a.createElement("div",{className:"".concat(e,"-inner-content")},a.createElement("div",{className:"".concat(e,"-message")},d,a.createElement("div",{className:"".concat(e,"-message-title")},c)),a.createElement("div",{className:"".concat(e,"-buttons")},a.createElement(i.default,m({onClick:t.onCancel,size:"small"},o),s||n.cancelText),a.createElement(i.default,m({onClick:t.onConfirm,type:f,size:"small"},l),u||n.okText))))},t.renderConfirm=function(e){var n=e.getPrefixCls,r=t.props,o=r.prefixCls,i=r.placement,u=A(r,["prefixCls","placement"]),f=n("popover",o),d=a.createElement(c.a,{componentName:"Popconfirm",defaultLocale:s.a.Popconfirm},(function(e){return t.renderOverlay(f,e)}));return a.createElement(l.default,m({},u,{prefixCls:f,placement:i,onVisibleChange:t.onVisibleChange,visible:t.state.visible,overlay:d,ref:t.saveTooltip}))},t.state={visible:e.visible},t}return t=f,r=[{key:"getDerivedStateFromProps",value:function(e){return"visible"in e?{visible:e.visible}:"defaultVisible"in e?{visible:e.defaultVisible}:null}}],(n=[{key:"getPopupDomNode",value:function(){return this.tooltip.getPopupDomNode()}},{key:"setVisible",value:function(e,t){var n=this.props;"visible"in n||this.setState({visible:e});var a=n.onVisibleChange;a&&a(e,t)}},{key:"render",value:function(){return a.createElement(u.a,null,this.renderConfirm)}}])&&d(t.prototype,n),r&&d(t,r),f}(a.Component);h.defaultProps={transitionName:"zoom-big",placement:"top",trigger:"click",okType:"primary",icon:a.createElement(o.default,{type:"exclamation-circle",theme:"filled"}),disabled:!1},Object(r.polyfill)(h),t.default=h},PhNK:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.truncateCommitId=function(e){return e&&e.length>11?e.substring(0,10):e},t.timeFormat=function(e){var t=new Date(1e3*e),n=t.getHours()<10?"0".concat(t.getHours()):t.getHours(),a=t.getMinutes()<10?"0".concat(t.getMinutes()):t.getMinutes();return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+"  "+n+":"+a}},"Rs/d":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,r,l=(a=["\n    display:flex;\n    font-weight: bold;\n    ","\n    align-items: center;\n    & img{\n      width:30px;\n      height:30px;\n      border-radius:50%;\n    }\n    ","\n  "],r=["\n    display:flex;\n    font-weight: bold;\n    ","\n    align-items: center;\n    & img{\n      width:30px;\n      height:30px;\n      border-radius:50%;\n    }\n    ","\n  "],Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(r)}}))),o=s(n("q1tI")),i=s(n("vOnD")),c=n("eO8H");function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.url,n=e.name,a=e.column,r=e.id,s=e.login,u=i.default.span(l,a&&"flex-direction: column;text-align:center;",!a&&"\n      & span{\n        margin-left:8px;\n      }");return r?o.default.createElement(c.Link,{to:"/"+s},o.default.createElement(u,null,t&&o.default.createElement("img",{src:t,alt:""}),o.default.createElement("span",null,n))):o.default.createElement(u,null,t&&o.default.createElement("img",{src:t,alt:""}),o.default.createElement("span",null,n))}},izWe:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l(n("2/Rp"));n("L/Qf");var r=l(n("q1tI"));function l(e){return e&&e.__esModule?e:{default:e}}n("e4dm"),t.default=function(e){var t=e.operation,n=e.addFunc;return r.default.createElement("div",{className:"emptyPanel color-grey-3"},r.default.createElement("i",{className:"iconfont icon-banbenicon font-50 color-grey-3",style:{height:"50px",lineHeight:"50px",marginBottom:"13px"}}),r.default.createElement("span",{className:"weight font-26 mb15"},"这里暂未发布过任何版本"),r.default.createElement("span",{className:"weight400",style:{textAlign:"center",lineHeight:"20px"}},"发行版功能基于仓库中的历史标记",r.default.createElement("br",null),"建议使用类似 V1.0 的版本标记作为发布点"),r.default.createElement("div",{className:"operation"},t?r.default.createElement(a.default,{type:"primary",onClick:n,className:"btnblue",style:{width:"118px",height:"36px"}},"发布新版本"):r.default.createElement("span",{className:"color-grey-3 weight font-16"},"该项目暂时没有发布版本")))}},k994:function(e,t,n){"use strict";n.r(t);n("SchZ"),n("Aosp"),n("L/Qf")},nCbK:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=b(n("W9HT")),r=b(n("2/Rp")),l=b(n("NJEC")),o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,l=void 0;try{for(var o,i=e[Symbol.iterator]();!(a=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,l=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw l}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};n("04bd"),n("L/Qf"),n("k994");var i=n("q1tI"),c=b(i),s=n("eO8H"),u=n("sYIF"),f=n("PhNK"),m=b(n("izWe"));n("e4dm");var d=b(n("vDqi")),p=b(n("x97h")),g=b(n("bjH3")),v=b(n("Rs/d"));b(n("0fBl"));function b(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=(0,i.useState)(void 0),n=o(t,2),b=n[0],y=n[1],A=(0,i.useState)(void 0),h=o(A,2),E=h[0],N=h[1],w=(0,i.useState)(!0),_=o(w,2),x=_[0],O=_[1],C=e.match.params,j=C.projectsId,k=C.owner,P=e.location,R=e.projectDetail&&e.projectDetail.type,I=P&&P.query&&P.query.turnFromNew;function S(){var e="/"+k+"/"+j+"/releases.json";d.default.get(e).then((function(e){if(e){y(e.data);var t=e.data.releases,n=void 0===t?[]:t;n.length&&(n[0].bodyshow=!0),N(e.data.releases),O(!1)}})).catch((function(e){console.log(e)}))}function T(t,n){return c.default.createElement("div",{className:"versionInfo",key:n},c.default.createElement("span",{className:"versionInfo_left"},c.default.createElement("span",{className:"稳定"===t.draft?"versionTag green":"versionTag orange"},t.draft),c.default.createElement("span",{className:"color-grey-3 mt15 font-12"},c.default.createElement("i",{className:"iconfont icon-biaoqianicon mr3 font-14"}),c.default.createElement(s.Link,{className:"hover",to:"/"+k+"/"+j+"/tree/"+t.tag_name},t.tag_name)),c.default.createElement("span",{className:"color-grey-3 font-12"},c.default.createElement("img",{src:p.default,width:"16px",color:"#333333",className:"mr3"}),c.default.createElement(s.Link,{className:"hover",to:"/"+k+"/"+j+"/commits/"+(0,f.truncateCommitId)(""+t.sha)},(0,f.truncateCommitId)(t.sha)))),c.default.createElement("div",{className:"versionInfo_right"},c.default.createElement("div",{className:"versionName"},c.default.createElement(s.Link,{to:"/"+k+"/"+j+"/tree/"+t.tag_name,className:"task-hide color-blue hover font-18"},t.name),c.default.createElement("span",null,b&&b.user_admin_permission&&2!==R&&c.default.createElement(s.Link,{to:{pathname:"/"+k+"/"+j+"/releases/"+t.version_id+"/update",state:{stable:"稳定"===t.draft}},className:"ml15"},c.default.createElement("i",{className:"iconfont icon-a-bianji1 font-16 color-grey-6"})),b&&b.user_admin_permission&&2!==R&&c.default.createElement(l.default,{placement:"bottom",title:"您确定要删除当前发行版吗？",okText:"是",cancelText:"否",onConfirm:function(){var e;(e=t.version_id)&&d.default.delete("/"+k+"/"+j+"/releases/"+e+".json").then((function(e){e&&S()}))}},c.default.createElement("i",{className:"iconfont icon-shanchuicon1 font-16 ml15"})))),c.default.createElement("span",{className:"color-grey-3 mb15 version-user"},c.default.createElement("i",{className:t.bodyshow?"iconfont icon-sanjiaoxing-down color-grey-8 mr3 font-14":"iconfont icon-triangle color-grey-8 mr3 font-14",onClick:function(){return function(e,t){var n=E.concat();n[e].bodyshow=!t,n.splice(),N(n)}(n,t.bodyshow)}}),c.default.createElement(v.default,{id:t.id,url:t.image_url&&(0,u.getImageUrl)("/"+t.image_url)||"https://dss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=3025493530,1989042357&fm=26&gp=0.jpg",name:t.user_name,login:t.user_login}),c.default.createElement("span",{className:"ml5"},"发布于",t.created_at)),t.bodyshow&&c.default.createElement("div",{className:"body-show"},c.default.createElement(g.default,{className:"break_word_comments imageLayerParent",value:t.body||"",url:e.history.location})),c.default.createElement(g.default,null),c.default.createElement("p",{className:"versionFile"},t.attachments&&t.attachments.map((function(e){return c.default.createElement("a",{href:e.url},c.default.createElement("i",{className:"iconfont icon-wenjian7 font-14 mr10 color-grey-3"}),"下载  ",e.title)})),c.default.createElement("a",{href:t.tarball_url},c.default.createElement("i",{className:"iconfont icon-wenjian7 font-14 mr10 color-grey-3"}),"下载  ",t.tag_name,".TAR.gz"),c.default.createElement("a",{href:t.zipball_url},c.default.createElement("i",{className:"iconfont icon-wenjian7 font-14 mr10 color-grey-3"}),"下载  ",t.tag_name,".ZIP"))))}function L(){e.history.push({pathname:"/"+k+"/"+j+"/releases/new",state:{stable:!0}})}return(0,i.useEffect)((function(){S()}),[]),c.default.createElement("div",{className:"releaseIndex"},c.default.createElement("div",{className:"releasesVersion"},c.default.createElement(a.default,{spinning:x},function(e){return e&&e.length>0?c.default.createElement(c.default.Fragment,null,b&&b.user_admin_permission&&2!==R&&c.default.createElement("div",{className:"addReleaseBtn"},c.default.createElement(r.default,{type:"primary",onClick:L,className:"btnblue",style:{height:"36px"}},"发布新版本")),c.default.createElement("div",null,I?T(e[0],0):e.map((function(e,t){return T(e,t)})))):e&&0===e.length?c.default.createElement(m.default,{operation:b&&b.user_admin_permission&&2!==R,addFunc:L}):c.default.createElement("div",null)}(E))))}},x97h:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAQCAYAAABtPJ3XAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAALKADAAQAAAABAAAAEAAAAACYv7IkAAAB4UlEQVRIDdVWv0/CQBR+ReLUqYMLiUlZGGQDXLo5SNxYWJ1Y3NSdP6HqYDQhLs4sLMTEGHd+jZKwQOLAgAMbgwTq+y5tQkNrj2tj4iUXuHff972vl+t71SihUSqVjhzHqfE8ZclDV/ZT07RXnk+9Xu8jiVRaXJFqtbo/mUxu2OgFa6VC9NZs+tE0zetms/kdgpEKxzIMs+Px+IUznSBbpVIRM5vNiuS8R61WS0wRIHrnvbO4pl2t3X+KxeJ9oVBwyuWy0+12+ZCDB/aAARac3TMlwMCdZQMrmPjNrPcIwAALDriqFsLuXKQeG6kxKIVrwAYi8cAAC47LjeQEAeIYRjXwTARpb8Vcw8SGBXcLIBFQNszaonR5L5hELtrAemVPhubDpHGvfJG/WeiqeeOcsHg0lC7ZsQs2TDM9GAyUajGXp1u+i5eos/l8PkzfFwcWg5vIXb/fv/JtSi6UTxjtlnOsYYLbbmQ6YFzD6HrgKo09JRaTptPpVyaTOeC/x51Oh3K5HPE6UA5m6/U6LRYLnO4Dn+5zIFAiqGwY2pZlvc3nc4uNmO12m2azGRmGQbqu03K5pNFoRI1Gg2zbFmaZgtZ8PhwOVxLeAiFK93dT6V99/GwaR7tFB3ObgldnE/+8/AGE+wKxroRyyAAAAABJRU5ErkJggg=="}}]);