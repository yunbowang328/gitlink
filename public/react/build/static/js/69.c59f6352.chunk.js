(this.webpackJsonp=this.webpackJsonp||[]).push([[69],{"2vbg":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=m(a("q1tI")),r=m(a("BsAk")),n=m(a("CDQ+")),s=m(a("OXXP")),u=m(a("QkuQ")),i=m(a("BNbK")),o=m(a("YWXN")),d=m(a("NsV7")),c=m(a("Af8K"));function m(e){return e&&e.__esModule?e:{default:e}}a("X1JU"),t.default=function(e){return l.default.createElement("div",{className:"loginRegister"},l.default.createElement("div",{className:"login_register_left"},l.default.createElement("img",{src:u.default,className:"logo",onClick:function(){window.location.href="/"}}),l.default.createElement("img",{src:o.default,className:"ball"}),l.default.createElement("img",{src:i.default,className:"banner"})),l.default.createElement("div",{className:"login_register_right"},"/login"===e.location.pathname?l.default.createElement(r.default,e):"/register"===e.location.pathname?l.default.createElement(n.default,null):l.default.createElement(s.default,null),l.default.createElement("img",{src:d.default,className:"img1"}),l.default.createElement("img",{src:c.default,className:"img2"})),l.default.createElement("div",{className:"clear"}))}},Af8K:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/img2.ae303051.png"},BNbK:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/banner.f7da2db1.png"},BsAk:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=g(a("2/Rp")),r=g(a("kaz8")),n=g(a("Vl3Y")),s=g(a("5rEg")),u=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],l=!0,r=!1,n=void 0;try{for(var s,u=e[Symbol.iterator]();!(l=(s=u.next()).done)&&(a.push(s.value),!t||a.length!==t);l=!0);}catch(e){r=!0,n=e}finally{try{!l&&u.return&&u.return()}finally{if(r)throw n}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};a("L/Qf"),a("MKzF"),a("tULf"),a("1vPl");var i=a("q1tI"),o=g(i),d=a("eO8H"),c=g(a("vDqi")),m=g(a("UlM7")),f=g(a("Po8q"));function g(e){return e&&e.__esModule?e:{default:e}}a("X1JU"),t.default=n.default.create({name:"login"})((function(e){var t=(0,i.useState)(),a=u(t,2),g=a[0],p=a[1],v=(0,i.useState)(void 0),E=u(v,2),h=E[0],y=E[1],_=e.form,N=e.location,b=_.getFieldDecorator,w=N.search;function I(e,t,a,l){p(void 0),t?a():a(1===l?"请输入邮箱地址或用户名登录":"请输入登录密码")}function B(){var e=document.getElementById("login_password");e&&"password"===e.type&&setTimeout((function(){e.removeAttribute("value")}),0)}return(0,i.useEffect)((function(){y(JSON.parse(localStorage.getItem("chromesetting")))}),[]),o.default.createElement("div",null,o.default.createElement("div",{className:"right_cont login_content"},o.default.createElement("div",{className:"login_register_head"},o.default.createElement("span",null,"欢迎登录 GitLink"),o.default.createElement("span",{className:"link_span"},"没有账号？",o.default.createElement(d.Link,{to:"/register"},"去注册"))),o.default.createElement("p",{className:g?"message active":"message"},g),o.default.createElement(n.default,{className:"login-form"},o.default.createElement(n.default.Item,null,b("username",{rules:[{validator:function(e,t,a){I(0,t,a,1)}}],validateTrigger:"onBlur"})(o.default.createElement(s.default,{className:"account",placeholder:"请输入邮箱地址/用户名"}))),o.default.createElement(n.default.Item,null,b("password",{rules:[{validator:function(e,t,a){I(0,t,a,2)}}],validateTrigger:"onBlur"})(o.default.createElement(s.default.Password,{className:"psd",placeholder:"请输入登录密码",onBlur:B,onChange:B}))),o.default.createElement("div",{className:"login_register_head login"},o.default.createElement(n.default.Item,null,b("remember",{valuePropName:"checked",initialValue:f.default.load("autologin")})(o.default.createElement(r.default,null,"下次自动登录"))),o.default.createElement(d.Link,{to:"/resetPassword",className:"goResetPsdBut"},"忘记密码？")),o.default.createElement(l.default,{type:"primary",htmlType:"submit",onClick:function(){_.validateFields((function(e,t){e||c.default.post("/accounts/login.json",{login:t.username,password:t.password,autologin:t.remember?1:0}).then((function(e){if(e.data.login){f.default.save("autologin",t.remember);var a=new URLSearchParams(w.substring(1)).get("go_page");window.location.href=a||"/"+e.data.login}else-2===e.data.status?p(e.data.message):p("错误的账号或密码")})).catch((function(e){console.log("error",e)}))}))},className:"login_register_cofBut"},"登录")),h&&h.third_party&&h.third_party.length>0?o.default.createElement("p",{className:"quick_logon"},o.default.createElement("p",{className:"quick_logon_p"}),o.default.createElement("span",{className:"startlogin"}," 快速登录 "),h.third_party.map((function(e,t){return o.default.createElement("a",{href:""+e.url},o.default.createElement("img",{src:"educoder"===e.name?m.default:"",width:"46px",alt:e.name+"登录"}))}))):""))}))},"CDQ+":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=g(a("kaz8")),r=g(a("2/Rp")),n=g(a("Vl3Y")),s=g(a("5rEg")),u=g(a("tsqr")),i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],l=!0,r=!1,n=void 0;try{for(var s,u=e[Symbol.iterator]();!(l=(s=u.next()).done)&&(a.push(s.value),!t||a.length!==t);l=!0);}catch(e){r=!0,n=e}finally{try{!l&&u.return&&u.return()}finally{if(r)throw n}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};a("MKzF"),a("L/Qf"),a("tULf"),a("1vPl"),a("8/o9");var o=a("q1tI"),d=g(o),c=a("eO8H"),m=g(a("vDqi")),f=a("sYIF");function g(e){return e&&e.__esModule?e:{default:e}}a("X1JU"),t.default=n.default.create({name:"register"})((function(e){var t=e.form,a=t.getFieldDecorator,g=(0,o.useState)(void 0),p=i(g,2),v=p[0],E=p[1],h=(0,o.useState)(void 0),y=i(h,2),_=y[0],N=y[1],b=(0,o.useState)(60),w=i(b,2),I=w[0],B=w[1],F=(0,o.useState)(!1),k=i(F,2),O=k[0],C=k[1],P=(0,o.useState)(!1),S=i(P,2),A=S[0],T=S[1],q=(0,o.useState)(void 0),V=i(q,2),j=V[0],L=V[1],R=(0,o.useState)(!1),M=i(R,2),X=M[0],U=M[1],Q=(0,o.useState)(!0),D=i(Q,2),J=D[0],x=D[1],Y=(0,o.useState)(!0),z=i(Y,2),K=z[0],$=z[1],G=(0,o.useRef)(),H=void 0,W=(0,o.useRef)(null);function Z(e,a,l,r){2===r&&a&&t.getFieldValue("register_psd")&&a!==t.getFieldValue("register_psd")||1===r&&a&&t.getFieldValue("psdComfirm")&&a!==t.getFieldValue("psdComfirm")?1===r?(t.setFields({psdComfirm:{value:t.getFieldValue("psdComfirm"),errors:[new Error("密码不一致，请重新输入")]}}),l()):l("密码不一致，请重新输入"):l()}function ee(){var e=document.getElementById("register_register_psd"),t=document.getElementById("register_psdComfirm");e&&"password"===e.type&&setTimeout((function(){e.removeAttribute("value")}),0),t&&"password"===t.type&&setTimeout((function(){t.removeAttribute("value")}),0)}return(0,o.useEffect)((function(){W.current.focus()}),[]),d.default.createElement("div",null,d.default.createElement("div",{className:"right_cont Register_content"},d.default.createElement("div",{className:"login_register_head"},d.default.createElement("span",null,"欢迎注册 GitLink"),d.default.createElement("span",{className:"link_span"},"已有账号，",d.default.createElement(c.Link,{to:"/login"},"立即登录"))),d.default.createElement("p",{className:j?"message active":"message"},j),d.default.createElement(n.default,{className:"login-form"},d.default.createElement(n.default.Item,null,a("register_username",{rules:[{required:!0,message:"请输入用户名"},{pattern:/^[a-zA-Z]/,message:"用户名必须以字母开头"},{pattern:/[a-zA-Z0-9]$/,message:"用户名只能使用英文字母和数字"},{min:4,max:15,message:"用户名长度为4到15个字符"},{validator:function(e,t,a){!function(e,t,a){x(!0),t&&(J||t!==_)?m.default.post("/accounts/check.json",{value:t,type:1}).then((function(e){-1===e.data.status?a("该名称已经被使用"):(N(t),x(!1),a())})):a(),N(void 0)}(0,t,a)}}],validateTrigger:"onBlur",validateFirst:!0})(d.default.createElement(s.default,{ref:W,className:"account",placeholder:"请输入4-15位用户名，以字母开头，只能使用字母和数字",readOnly:!0,onFocus:function(){document.getElementById("register_register_username").removeAttribute("readOnly")}}))),d.default.createElement(n.default.Item,null,a("email",{rules:[{type:"email",message:"请输入正确的邮箱格式"},{required:!0,message:"请输入邮箱地址"},{validator:function(e,t,a){!function(e,t,a){$(!0),t&&(K||t!==v)?m.default.post("/accounts/check.json",{value:t,type:2}).then((function(e){-1===e.data.status?(T(!1),a("该邮箱已被注册")):(E(t),T(!0),$(!1),a())})):a(),E(void 0)}(0,t,a)}}],validateTrigger:"onBlur",validateFirst:!0})(d.default.createElement(s.default,{className:"email",placeholder:"请输入邮箱地址",readOnly:!0,onFocus:function(){document.getElementById("register_email").removeAttribute("readOnly")}}))),d.default.createElement(n.default.Item,null,d.default.createElement("div",{className:"login_register_head"},a("captcha",{rules:[{required:!0,message:"请输入验证码"}],validateTrigger:"onBlur"})(d.default.createElement(s.default,{className:"captcha",placeholder:"请输入验证码",readOnly:!0,onFocus:function(){document.getElementById("register_captcha").removeAttribute("readOnly")}})),d.default.createElement(r.default,{className:A?"codeBut":"codeBut disable",disabled:!A,onClick:function(){L(void 0),v&&(C(!0),T(!1),G.current=60,B(60),!H&&clearInterval(H),H=setInterval((function(){if(G.current>1){var e=G.current;G.current=e-1,B(e-1)}else clearInterval(H),T(!0),C(!1)}),1e3),m.default.get("/accounts/get_verification_code.json",{params:{login:v,type:1,smscode:(0,f.setmiyah)(v)}}).then((function(e){if(e.data&&0===e.data.status){var t=v.substring(v.indexOf("@")+1);u.default.success({content:d.default.createElement("span",null,"验证码已发送，请注意查收。",d.default.createElement("a",{href:"https://mail."+t,target:"_blank"},"前往邮箱"))})}else T(!1),C(!1),clearInterval(H),L(e.data.message)})))}},A||!A&&!O?"获取验证码":"重发("+I+"s)"))),d.default.createElement(n.default.Item,null,a("register_psd",{rules:[{validator:function(e,t,a){Z(0,t,a,1)}},{validator:function(e,t,a){!function(e,t,a){t?/(?!.*\s)(?!^[\u4e00-\u9fa5]+$)^.{8,16}$/.test(t)?a():(U(!0),t.length<8||t.length>16?a("密码长度为8-16个字符"):a("密码不能使用空格")):(U(!0),a("请输入登录密码"))}(0,t,a)}}],validateTrigger:"onBlur",validateFirst:!0})(d.default.createElement(s.default.Password,{className:"register_psd",placeholder:"请输入登录密码",onBlur:ee,onChange:ee,readOnly:!0,onFocus:function(){document.getElementById("register_register_psd").removeAttribute("readOnly")}}))),d.default.createElement("span",{className:"password_tips",style:{display:X?"none":"block"}},"请输入8-16位密码，区分大小写、不能使用空格"),d.default.createElement(n.default.Item,null,a("psdComfirm",{rules:[{required:!0,message:"请确认登录密码"},{validator:function(e,t,a){Z(0,t,a,2)}}],validateTrigger:"onBlur",validateFirst:!0})(d.default.createElement(s.default.Password,{className:"psdComfirm",placeholder:"请确认登录密码",onBlur:ee,onChange:ee,readOnly:!0,onFocus:function(){document.getElementById("register_psdComfirm").removeAttribute("readOnly")}}))),d.default.createElement(n.default.Item,{className:"register_last_form"},a("agreement",{valuePropName:"checked",initialValue:!1,rules:[{validator:function(e,t,a){!function(e,t,a){t?a():a("请阅读并接受我们的服务条款")}(0,t,a)}}]})(d.default.createElement(l.default,null,"我已阅读并接受",d.default.createElement("a",{className:"login-form-forgot",href:"https://forum.trustie.net/forums/5029/detail",target:"_blank"},"《GitLink服务协议条款》")))),d.default.createElement(r.default,{type:"primary",htmlType:"submit",className:"login_register_cofBut",onClick:function(){t.validateFields((function(e,a){e||a.agreement&&m.default.post("/accounts/register.json",{login:a.email,namespace:a.register_username,password:a.register_psd,password_confirmation:a.psdComfirm,code:a.captcha}).then((function(e){e.data&&-6===e.data.status?(t.setFields({captcha:{value:a.captcha,errors:[new Error("验证码错误，请重新输入")]}}),E(a.email)):e.data&&0===e.data.status?window.location.href="/"+a.register_username:(E(a.email),L(e.data.message))}))}))}},"注册"))))}))},NsV7:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/img1.8560258f.png"},OXXP:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=f(a("2/Rp")),r=f(a("Vl3Y")),n=f(a("5rEg")),s=f(a("tsqr")),u=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],l=!0,r=!1,n=void 0;try{for(var s,u=e[Symbol.iterator]();!(l=(s=u.next()).done)&&(a.push(s.value),!t||a.length!==t);l=!0);}catch(e){r=!0,n=e}finally{try{!l&&u.return&&u.return()}finally{if(r)throw n}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};a("L/Qf"),a("tULf"),a("1vPl"),a("8/o9");var i=a("q1tI"),o=f(i),d=a("eO8H"),c=f(a("vDqi")),m=a("sYIF");function f(e){return e&&e.__esModule?e:{default:e}}a("X1JU"),t.default=r.default.create({name:"resetPassword"})((function(e){var t=e.form,a=t.getFieldDecorator,f=(0,i.useState)(void 0),g=u(f,2),p=g[0],v=g[1],E=(0,i.useState)(60),h=u(E,2),y=h[0],_=h[1],N=(0,i.useState)(!1),b=u(N,2),w=b[0],I=b[1],B=(0,i.useState)(!1),F=u(B,2),k=F[0],O=F[1],C=(0,i.useState)(void 0),P=u(C,2),S=P[0],A=P[1],T=(0,i.useState)(!1),q=u(T,2),V=q[0],j=q[1],L=(0,i.useState)(!0),R=u(L,2),M=R[0],X=R[1],U=(0,i.useRef)(),Q=void 0,D=(0,i.useRef)(null);function J(e,a,l,r){2===r&&a&&t.getFieldValue("psd")&&a!==t.getFieldValue("psd")||1===r&&a&&t.getFieldValue("psdComfirm")&&a!==t.getFieldValue("psdComfirm")?1===r?(t.setFields({psdComfirm:{value:t.getFieldValue("psdComfirm"),errors:[new Error("密码不一致，请重新输入")]}}),l()):l("密码不一致，请重新输入"):l()}function x(){var e=document.getElementById("resetPassword_psd"),t=document.getElementById("resetPassword_psdComfirm");e&&"password"===e.type&&setTimeout((function(){e.removeAttribute("value")}),0),t&&"password"===t.type&&setTimeout((function(){t.removeAttribute("value")}),0)}return(0,i.useEffect)((function(){D.current.focus()}),[]),o.default.createElement("div",null,o.default.createElement("div",{className:"right_cont ResetPassword_content"},o.default.createElement("div",{className:"login_register_head"},o.default.createElement("span",null,"找回密码"),o.default.createElement("span",{className:"link_span"},"已有账号，",o.default.createElement(d.Link,{to:"/login"},"立即登录"))),o.default.createElement("p",{className:S?"message active":"message"},S),o.default.createElement(r.default,{className:"login-form"},o.default.createElement(r.default.Item,null,a("email",{rules:[{type:"email",message:"请输入正确的邮箱格式"},{required:!0,message:"请输入已注册的邮箱"},{validator:function(e,t,a){!function(e,t,a){X(!0),t&&(M||t!==p)?c.default.post("/accounts/check.json",{value:t,type:2}).then((function(e){e.data&&-1===e.data.status?(v(t),O(!0),X(!1),a()):(O(!1),a("此邮箱未注册"))})):a(),v(void 0)}(0,t,a)}}],validateTrigger:"onBlur",validateFirst:!0})(o.default.createElement(n.default,{ref:D,className:"account",placeholder:"请输入已注册的邮箱",readOnly:!0,onFocus:function(){document.getElementById("resetPassword_email").removeAttribute("readOnly")}}))),o.default.createElement(r.default.Item,null,o.default.createElement("div",{className:"login_register_head"},a("captcha",{rules:[{required:!0,message:"请输入验证码"}],validateTrigger:"onBlur"})(o.default.createElement(n.default,{className:"captcha",placeholder:"请输入验证码",readOnly:!0,onFocus:function(){document.getElementById("resetPassword_captcha").removeAttribute("readOnly")}})),o.default.createElement(l.default,{className:k?"codeBut":"codeBut disable",disabled:!k,onClick:function(){A(void 0),p&&(I(!0),O(!1),U.current=60,_(60),!Q&&clearInterval(Q),Q=setInterval((function(){if(U.current>1){var e=U.current;U.current=e-1,_(e-1)}else O(!0),I(!1),clearInterval(Q)}),1e3),c.default.get("/accounts/get_verification_code.json",{params:{login:p,type:2,smscode:(0,m.setmiyah)(p)}}).then((function(e){if(e.data&&0===e.data.status){var t=p.substring(p.indexOf("@")+1);s.default.success({content:o.default.createElement("span",null,"验证码已发送，请注意查收。",o.default.createElement("a",{href:"https://mail."+t,target:"_blank"},"前往邮箱"))})}else O(!1),I(!1),clearInterval(Q),A(e.data.message)})))}},k||!k&&!w?"获取验证码":"重发("+y+"s)"))),o.default.createElement(r.default.Item,null,a("psd",{rules:[{validator:function(e,t,a){J(0,t,a,1)}},{validator:function(e,t,a){!function(e,t,a){t?/(?!.*\s)(?!^[\u4e00-\u9fa5]+$)^.{8,16}$/.test(t)?a():(j(!0),t.length<8||t.length>16?a("密码长度为8-16个字符"):a("密码不能使用空格")):(j(!0),a("请输入新密码"))}(0,t,a)}}],validateTrigger:"onBlur",validateFirst:!0})(o.default.createElement(n.default.Password,{className:"psd",placeholder:"请输入新密码",onBlur:x,onChange:x,readOnly:!0,onFocus:function(){document.getElementById("resetPassword_psd").removeAttribute("readOnly")}}))),o.default.createElement("span",{className:"password_tips",style:{display:V?"none":"block"}},"请输入8-16位密码，区分大小写、不能使用空格"),o.default.createElement(r.default.Item,null,a("psdComfirm",{rules:[{required:!0,message:"请确认新密码"},{validator:function(e,t,a){J(0,t,a,2)}}],validateTrigger:"onBlur",validateFirst:!0})(o.default.createElement(n.default.Password,{className:"psdComfirm",placeholder:"请确认新密码",onBlur:x,onChange:x,readOnly:!0,onFocus:function(){document.getElementById("resetPassword_psdComfirm").removeAttribute("readOnly")}}))),o.default.createElement(r.default.Item,null,o.default.createElement(l.default,{type:"primary",htmlType:"submit",className:"login_register_cofBut",onClick:function(){t.validateFieldsAndScroll((function(e,a){e||c.default.post("/accounts/reset_password.json",{login:a.email,password:a.psd,password_confirmation:a.psdComfirm,code:a.captcha}).then((function(e){if(0===e.data.status)c.default.post("/accounts/login.json",{login:a.email,password:a.psd}).then((function(e){e.data.login?window.location.href="/"+e.data.login:A(e.data.message)})).catch((function(e){console.log("error",e)}));else{v(a.email);var l=e.data.message;"验证码不正确"===l?t.setFields({captcha:{value:a.captcha,errors:[new Error("验证码错误，请重新输入")]}}):A(l)}}))}))}},"重置密码并登录")))))}))},QkuQ:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/logo.35cca493.png"},X1JU:function(e,t,a){},YWXN:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/ball.24214b6e.png"}}]);